\begin{tikzpicture}
    % 1st row
    \node[latent] (k1) {$k_1$} ; %
    \node[obs, below=0.3cm of k1] (p1) {$p_1$} ; %
    \factor[right=0.5cm of k1, yshift=-0.45cm] {kp1_xor} {below:$\textsc{xor}$} {} {}; %
    \factoredge {k1, p1} {kp1_xor} {} ; %
    \node[latent, right=0.5cm of kp1_xor] (y1) {$y_1$} ; %
    \factor[right=0.5cm of y1] {s1} {below:$\textsc{s}$} {} {}; %
    \factoredge {y1} {kp1_xor, s1} {} ; %
    \node[latent, right=0.5cm of s1] (x1) {$x_1$} ; %
    \factoredge {x1} {s1} {} ; %
    \factor[right=0.75cm of x1, yshift=-0.85cm] {xor12} {below:$\textsc{xor}$} {} {}; %
    \node[latent, right=0.5cm of xor12] (x12) {$x_{12}$} ; %
    \factoredge {x12} {xor12} {} ; %
    \factor[right=0.5cm of x12] {xt12} {below:$\textsc{xtime}$} {} {}; %
    \node[latent, right=0.5cm of xt12] (x12_tilde) {$\tilde{x}_{12}$} ; %
    \factoredge {x12, x12_tilde} {xt12} {} ; %
    \factor[right=0.5cm of x12_tilde] {xor12_tilde} {below:$\textsc{xor}$} {} {}; %
    \node[latent, right=0.5cm of xor12_tilde] (x12') {$x_{12}'$} ; %
    \factoredge {x12', x12_tilde} {xor12_tilde} {} ; %
    \factor[right=0.75cm of x12', yshift=0.85cm] {xor1_final} {below:$\textsc{xor}$} {} {}; %
    \node[latent, right=0.5cm of xor1_final] (x1m) {$x_{1}^{(m)}$} ; %
    \factoredge {x1, x12', x1m} {xor1_final} {} ; %
    
    % 2nd row
    \node[latent, below=0.3cm of p1] (k2) {$k_2$} ; %
    \node[obs, below=0.3cm of k2] (p2) {$p_2$} ; %
    \factor[right=0.5cm of k2, yshift=-0.45cm] {kp2_xor} {below:$\textsc{xor}$} {} {}; %
    \factoredge {k2, p2} {kp2_xor} {} ; %
    \node[latent, right=0.5cm of kp2_xor] (y2) {$y_2$} ; %
    \factor[right=0.5cm of y2] {s2} {below:$\textsc{s}$} {} {}; %
    \factoredge {y2} {kp2_xor, s2} {} ; %
    \node[latent, right=0.5cm of s2] (x2) {$x_2$} ; %
    \factor[right=0.75cm of x2, yshift=-0.85cm] {xor23} {below:$\textsc{xor}$} {} {}; %
    \factoredge {x2} {s2, xor23} {} ; %
    \node[latent, right=0.5cm of xor23] (x23) {$x_{23}$} ; %
    \factoredge {x23} {xor23} {} ; %
    \factor[right=0.5cm of x23] {xt23} {below:$\textsc{xtime}$} {} {}; %
    \node[latent, right=0.5cm of xt23] (x23_tilde) {$\tilde{x}_{23}$} ; %
    \factoredge {x23, x23_tilde} {xt23} {} ; %
    \factor[right=0.5cm of x23_tilde] {xor23_tilde} {below:$\textsc{xor}$} {} {}; %
    \node[latent, right=0.5cm of xor23_tilde] (x23') {$x_{23}'$} ; %
    \factoredge {x23', x23_tilde} {xor23_tilde} {} ; %
    \factor[right=0.75cm of x23', yshift=0.85cm] {xor2_final} {below:$\textsc{xor}$} {} {}; %
    \node[latent, right=0.5cm of xor2_final] (x2m) {$x_{2}^{(m)}$} ; %
    \factoredge {x2, x23', x2m} {xor2_final} {} ; %
    
    \factoredge {x1, x2} {xor12} {} ; %
    
    % 3rd row
    \node[latent, below=0.3cm of p2] (k3) {$k_3$} ; %
    \node[obs, below=0.3cm of k3] (p3) {$p_3$} ; %
    \factor[right=0.5cm of k3, yshift=-0.45cm] {kp3_xor} {below:$\textsc{xor}$} {} {}; %
    \factoredge {k3, p3} {kp3_xor} {} ; %
    \node[latent, right=0.5cm of kp3_xor] (y3) {$y_3$} ; %
    \factor[right=0.5cm of y3] {s3} {below:$\textsc{s}$} {} {}; %
    \factoredge {y3} {kp3_xor, s3} {} ; %
    \node[latent, right=0.5cm of s3] (x3) {$x_3$} ; %
    \factor[right=0.75cm of x3, yshift=-0.85cm] {xor34} {below:$\textsc{xor}$} {} {}; %
    \factoredge {x3} {s3, xor34} {} ; %
    \node[latent, right=0.5cm of xor34] (x34) {$x_{34}$} ; %
    \factoredge {x34} {xor34} {} ; %
    \factor[right=0.5cm of x34] {xt34} {below:$\textsc{xtime}$} {} {}; %
    \node[latent, right=0.5cm of xt34] (x34_tilde) {$\tilde{x}_{34}$} ; %
    \factoredge {x34, x34_tilde} {xt34} {} ; %
    \factor[right=0.5cm of x34_tilde] {xor34_tilde} {below:$\textsc{xor}$} {} {}; %
    \node[latent, right=0.5cm of xor34_tilde] (x34') {$x_{34}'$} ; %
    \factoredge {x34', x34_tilde} {xor34_tilde} {} ; %
    \factor[right=0.75cm of x34', yshift=0.85cm] {xor3_final} {below:$\textsc{xor}$} {} {}; %
    \node[latent, right=0.5cm of xor3_final] (x3m) {$x_{3}^{(m)}$} ; %
    \factoredge {x3, x34', x3m} {xor3_final} {} ; %
    
    \factoredge {x2, x3} {xor23} {} ; %
    
    % 4th row
    \node[latent, below=0.3cm of p3] (k4) {$k_4$} ; %
    \node[obs, below=0.3cm of k4] (p4) {$p_4$} ; %
    \factor[right=0.5cm of k4, yshift=-0.45cm] {kp4_xor} {below:$\textsc{xor}$} {} {}; %
    \factoredge {k4, p4} {kp4_xor} {} ; %
    \node[latent, right=0.5cm of kp4_xor] (y4) {$y_4$} ; %
    \factor[right=0.5cm of y4] {s4} {below:$\textsc{s}$} {} {}; %
    \factoredge {y4} {kp4_xor, s4} {} ; %
    \node[latent, right=0.5cm of s4] (x4) {$x_4$} ; %
    \factor[right=0.75cm of x4, yshift=-0.85cm] {xor41} {below:$\textsc{xor}$} {} {}; %
    \factoredge {x4} {s4, xor41} {} ; %
    \node[latent, right=0.5cm of xor41] (x41) {$x_{41}$} ; %
    \factoredge {x41} {xor41} {} ; %
    \factor[right=0.5cm of x41] {xt41} {below:$\textsc{xtime}$} {} {}; %
    \node[latent, right=0.5cm of xt41] (x41_tilde) {$\tilde{x}_{41}$} ; %
    \factoredge {x41, x41_tilde} {xt41} {} ; %
    \factor[right=0.5cm of x41_tilde] {xor41_tilde} {below:$\textsc{xor}$} {} {}; %
    \node[latent, right=0.5cm of xor41_tilde] (x41') {$x_{41}'$} ; %
    \factoredge {x41', x41_tilde} {xor41_tilde} {} ; %
    \factor[right=0.75cm of x41', yshift=0.85cm] {xor4_final} {below:$\textsc{xor}$} {} {}; %
    \node[latent, right=0.5cm of xor4_final] (x4m) {$x_{4}^{(m)}$} ; %
    \factoredge {x4, x41', x4m} {xor4_final} {} ; %
    
    \factoredge {x3, x4} {xor34} {} ; %
    \factoredge {x1, x4} {xor41} {} ; %
    
    % global
    \factor[above=1.25cm of x12, xshift=1.00cm] {global_xor} {above:$\textsc{xor}$} {} {}; %
    \node[latent, right=0.85cm of global_xor] (g) {$g$} ; %
    \factoredge {x12, x34} {global_xor} {} ; %
    \factoredge {g} {global_xor, xor12_tilde, xor23_tilde, xor34_tilde, xor41_tilde} {} ; %
\end{tikzpicture}